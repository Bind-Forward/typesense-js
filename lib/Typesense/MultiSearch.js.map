{"version":3,"sources":["Typesense/MultiSearch.js"],"names":["RESOURCEPATH","MultiSearch","apiCall","configuration","useTextContentType","_apiCall","_configuration","_useTextContentType","_requestWithCache","RequestWithCache","searchRequests","commonParams","cacheSearchResultsForSeconds","additionalHeaders","perform","post","cacheResponseForSeconds"],"mappings":"AAAA;;;;;;;;;;;;;AAEA;;AAEA,IAAMA,YAAY,GAAG,eAArB;;IAEqBC,W;AACnB,uBAAaC,OAAb,EAAsBC,aAAtB,EAAiE;AAAA,QAA5BC,kBAA4B,uEAAP,KAAO;AAAA;AAC/D,SAAKC,QAAL,GAAgBH,OAAhB;AACA,SAAKI,cAAL,GAAsBH,aAAtB;AACA,SAAKI,mBAAL,GAA2BH,kBAA3B,CAH+D,CAGjB;;AAE9C,SAAKI,iBAAL,GAAyB,IAAIC,yBAAJ,EAAzB;AACD;;;;WAED,iBAASC,cAAT,EAAoI;AAAA,UAA3GC,YAA2G,uEAA5F,EAA4F;;AAAA,qFAAJ,EAAI;AAAA,uCAAvFC,4BAAuF;AAAA,UAAvFA,4BAAuF,sCAAxD,KAAKN,cAAL,CAAoBM,4BAAoC;;AAClI,UAAIC,iBAAiB,GAAG,EAAxB;;AACA,UAAI,KAAKN,mBAAT,EAA8B;AAC5BM,QAAAA,iBAAiB,CAAC,cAAD,CAAjB,GAAoC,YAApC;AACD;;AAED,aAAO,KAAKL,iBAAL,CAAuBM,OAAvB,CACL,KAAKT,QADA,EAEL,KAAKA,QAAL,CAAcU,IAFT,EAGL,CAACf,YAAD,EAAeU,cAAf,EAA+BC,YAA/B,EAA6CE,iBAA7C,CAHK,EAIL;AAACG,QAAAA,uBAAuB,EAAEJ;AAA1B,OAJK,CAAP;AAMD","sourcesContent":["'use strict'\n\nimport RequestWithCache from './RequestWithCache'\n\nconst RESOURCEPATH = '/multi_search'\n\nexport default class MultiSearch {\n  constructor (apiCall, configuration, useTextContentType = false) {\n    this._apiCall = apiCall\n    this._configuration = configuration\n    this._useTextContentType = useTextContentType // To avoid OPTIONS request\n\n    this._requestWithCache = new RequestWithCache()\n  }\n\n  perform (searchRequests, commonParams = {}, {cacheSearchResultsForSeconds = this._configuration.cacheSearchResultsForSeconds} = {}) {\n    let additionalHeaders = {}\n    if (this._useTextContentType) {\n      additionalHeaders['content-type'] = 'text/plain'\n    }\n\n    return this._requestWithCache.perform(\n      this._apiCall,\n      this._apiCall.post,\n      [RESOURCEPATH, searchRequests, commonParams, additionalHeaders],\n      {cacheResponseForSeconds: cacheSearchResultsForSeconds}\n    )\n  }\n}\n"],"file":"MultiSearch.js"}